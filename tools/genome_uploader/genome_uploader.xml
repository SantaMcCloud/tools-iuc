<tool id="genome_uploader" name="Genome-uploader" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>Python script to upload bins and MAGs in fasta format to ENA</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="exit_code">
        <![CDATA[

            mkdir outputs $$

            genome_upload
            -u '$study'
            --genome_info '$genome_info'
            --out outputs
            ${type}
            ${live}
            --webin '$webin'
            --password '$password'
            --centre_name '$centre_name'
            ${tpa}

        ]]>
    </command>
    <inputs>
        <param name="study" type="text" label="Study accession"
            help="In format ERPxxxxxx or PRJEBxxxxxx where x stands for a number">
            <validator type="regex">^(?:ERP\d{6}|PRJEB\d{6})$</validator>
        </param>
        <param argument="--genome_info" type="data" format="tabular" label="Input genomes metadata file (tsv file)"
            help="To see an example how the tsv file should look like have a look into the help section an the bottom of the tool!"/>
        <param name="type" type="select" label="What will be uploaded"
            help="Refer to the ENA definition in the help section at the bottom of the tool if you have doubt!">
            <option value="--bin">Bins</option>
            <option value="--mag">MAGs</option>
        </param>
        <!-- PLEASE READ THE COMMENT DOWN BELOW THIS PARAMETER -->
        <param argument="--live" type="boolean" truevalue="--live" falsevalue="" label="Upload to ENA live server"
            help="WARNING: only use this option if you want to upload the data to the live ENA server. If you want to TEST your uplaod dint use this option then!"/>
        <!-- DO NOT USE THIS PARAMETER IN ANY TEST CASES SINCE THE TEST DATA SHOULD NOT BE UPLOADED TO THE LIVE ENA SERVER. IGNORE THIS PARAMETER FOR ANY TEST THEN! -->
        <param argument="--webin" type="text" label="Enter Webin ID">
            <validator type="regex">^Webin_[0-9]{5}$</validator>
        </param> 
        <param argument="--password" type="text" label="Enter your Webin password"/>
        <param argument="--centre_name" type="text" label="Enter name of the centre generating and uploading genomes"/>
        <param argument="--tpa" type="boolean" truevalue="--tpa" falsevalue="" label="Third party generated genome(s)?"
            help="toggle if the genomes uploaded are third party generated genome(s)"/>
    </inputs> 
    <outputs>
        
    </outputs>
    <tests>

    </tests>
    <help>
        <![CDATA[
        
        ]]>
    </help>
    <expand macro="citations" />
</tool>